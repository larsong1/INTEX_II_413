@using INTEX_II_413.Models.ViewModels
@model ProductsListViewModel

<div class="container mt-4">
    <h1 class="mb-4 text-center">Products</h1>

    <div class="row">

        <!-- Filters section -->
        <div class="col-md-2 col-sm-12">
            <div class="d-grid gap-2">
                <vc:product-category class="mb-2" />
                <vc:product-color class="mb-2" />

                <!-- New dropdown for selecting page size -->
                <div class="dropdown">
                    <button class="btn btn-outline-secondary dropdown-toggle w-100" type="button" id="pageSizeDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        Page Size
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="pageSizeDropdown">
                        <li><a class="dropdown-item" asp-action="Products" asp-controller="Home" asp-route-pageNum="1" asp-route-pageSize="5">5</a></li>
                        <li><a class="dropdown-item" asp-action="Products" asp-controller="Home" asp-route-pageNum="1" asp-route-pageSize="10">10</a></li>
                        <li><a class="dropdown-item" asp-action="Products" asp-controller="Home" asp-route-pageNum="1" asp-route-pageSize="20">20</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Products list on the right -->
        <div class="col-md-10 col-sm-12">
            <div class="row row-cols-1 row-cols-md-1 row-cols-lg-2 g-3">
                @foreach (Product p in Model.Products)
                {
                    <partial name="ProductSummary" model="@p" />
                }
            </div>

            <!-- Pagination at the bottom of the products list -->
            <div class="row justify-content-center mt-4">
                <div class="col-auto">
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            @for (int i = 1; i <= Model.PaginationInfo.TotalPages; i++)
                            {
                                <li class="page-item @(i == Model.PaginationInfo.CurrentPage ? "active" : "")">
                                    <a class="page-link" href="@Url.Action("Products", "Home", new { pageNum = i, pageSize = Model.PaginationInfo.ItemsPerPage, productCategory = Model.CurrentProductCategory, productColor = Model.CurrentProductColor })">@i</a>
                                </li>
                            }
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

